!function(e,t){var n=document.querySelector("#knowledgeTemplate").innerHTML,s=document.querySelector("#knowledgeSerach"),i=document.querySelector("#cancelSearchBtn"),a=document.querySelector("#knowledgeSerach"),l=function(){this.show=function(e){/hide/.test(e.className)&&(e.className=e.className.replace("hide",""),e.className=e.className.replace("  "," "))},this.hide=function(e){/hide/.test(e.className)||(e.className+=" hide")}},r=function(){e.call(this),this.method="knowledgeSerach",this.fields={id:{type:"integer",mapping:"id"},title:{type:"string",defaultValue:"",mapping:"title"},time:{type:"date",defaultValue:"",mapping:"updatedTime"},author:{type:"string",defaultValie:"",mapping:"publisher"}},this.getLocalStorage=function(){return localStorage[this.method]},this.setLocalStorage=function(e){localStorage[this.method]=e},this.setDefaultMapping()},c=function(){var e=document.querySelector("#cateGorysContainer"),i=document.querySelector("#knowledgeSearchListContainer"),r=document.querySelector("#cancelSearchBtn"),c=s.parentNode,o=s.previousElementSibling,h=new l;this.hideCateGorys=function(){return h.hide(e),this},this.showCateGorys=function(){return h.show(e),this},this.initSearchInputLabelStyle=function(){var e=(c.clientWidth-70)/2;o.style.left=e+"px",h.show(o)},this.hideKnowledgeTitleLists=function(){return h.hide(i),this},this.showKnowledgeTitleLists=function(){return h.show(i),this},this.renderKnowledgeTitleLists=function(e){return i.innerHTML=t.template(n)({knowledges:e}),this},this.emptyKnowledgeTitleLists=function(){return i.innerHTML="",this},this.setInputFocusStyle=function(){/focus/.test(c.className)||(c.className+=" focus")},this.setInputBlurStyle=function(){/focus/.test(c.className)&&(c.className=c.className.replace("focus",""),c.className=c.className.replace("  "," "))},this.showCancelBtn=function(){return h.show(r),this},this.hideCancelBtn=function(){return h.hide(r),this},this.selectSearchVal=function(){a.setSelectionRange(0,a.value.length)},this.setSearchValue=function(e){a.value=e},this.resetSearchValue=function(){this.setSearchValue("")},this.initSearchInputLabelStyle()},o=function(){model=new r;var e=new c,t=this,n=!1;this.search=function(t){var s=t||window.event;s.preventDefault();var i=this.value;model.post({id:i},function(t){n=!0;var s=t.knowledges;if(s){s=model.dataMapping(s,!1);var a=JSON.stringify({search:i,results:s});model.setLocalStorage(a),e.renderKnowledgeTitleLists(s)}})},this.renderStorageSearch=function(){var t=model.getLocalStorage();t&&(t=JSON.parse(t),t.results&&e.renderKnowledgeTitleLists(t.results))},this.startSearch=function(){n||t.renderStorageSearch(),e.setInputFocusStyle(),e.hideCateGorys(),e.showKnowledgeTitleLists(),e.showCancelBtn()},this.cancelSearch=function(){n=!1,e.setInputBlurStyle(),e.hideKnowledgeTitleLists(),e.hideCancelBtn(),e.showCateGorys(),e.resetSearchValue(),e.emptyKnowledgeTitleLists()},this.listenEvent=function(){s.addEventListener("search",this.search),s.addEventListener("focus",this.startSearch),i.addEventListener("click",this.cancelSearch)}},h=new o;h.listenEvent()}(BaseModel,_);