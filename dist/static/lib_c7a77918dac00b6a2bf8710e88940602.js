function collectNonEnumProps(t,e){var n=nonEnumerableProps.length,r=t.constructor,i=_.isFunction(r)&&r.prototype||ObjProto,a="constructor";for(_.has(t,a)&&!_.contains(e,a)&&e.push(a);n--;)a=nonEnumerableProps[n],a in t&&t[a]!==i[a]&&!_.contains(e,a)&&e.push(a)}var _=window._||{};window._=_,_.VERSION="1.8.3","function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(t){return"function"==typeof t||!1});var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create;_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(t){return"\\"+escapes[t]},optimizeCb=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,a){return t.call(e,n,r,i,a)}}return function(){return t.apply(e,arguments)}};_.each=_.forEach=function(t,e,n){e=optimizeCb(e,n);var r,i;if(isArrayLike(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var a=_.keys(t);for(r=0,i=a.length;i>r;r++)e(t[a[r]],a[r],t)}return t},_.has=function(t,e){return null!=t&&hasOwnProperty.call(t,e)},_.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t};var property=function(t){return function(e){return null==e?void 0:e[t]}},MAX_ARRAY_INDEX=Math.pow(2,53)-1,getLength=property("length"),isArrayLike=function(t){var e=getLength(t);return"number"==typeof e&&e>=0&&MAX_ARRAY_INDEX>=e};_.contains=_.includes=_.include=function(t,e,n,r){return isArrayLike(t)||(t=_.values(t)),("number"!=typeof n||r)&&(n=0),_.indexOf(t,e,n)>=0};var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];_.allKeys=function(t){if(!_.isObject(t))return[];var e=[];for(var n in t)e.push(n);return hasEnumBug&&collectNonEnumProps(t,e),e};var createAssigner=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var a=arguments[i],o=t(a),s=o.length,u=0;s>u;u++){var c=o[u];e&&void 0!==n[c]||(n[c]=a[c])}return n}};_.defaults=createAssigner(_.allKeys,!0),_.template=function(t,e,n){!e&&n&&(e=n),e=_.defaults({},e,_.templateSettings);var r=RegExp([(e.escape||noMatch).source,(e.interpolate||noMatch).source,(e.evaluate||noMatch).source].join("|")+"|$","g"),i=0,a="__p+='";t.replace(r,function(e,n,r,o,s){return a+=t.slice(i,s).replace(escaper,escapeChar),i=s+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(e.variable||"obj","_",a)}catch(s){throw s.source=a,s}var u=function(t){return o.call(this,t,_)},c=e.variable||"obj";return u.source="function("+c+"){\n"+a+"}",u};var Validator=function(){var t={integer:function(t){var e=t+"",n=e.split(".")[1];return isNaN(t)?!1:n&&n.length>0?!1:!0},string:function(t){return"string"==typeof t},number:function(t){return!isNaN(t)},phone:function(t){return/[0-9]{11}/.test(t)},email:function(t){return/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(t)},length:function(t,e){return datastr=t+"",datastr.length==e},min:function(t,e){return"string"==typeof t&&(t=parseFloat(t)),isNaN(t)?!1:t>e},max:function(t,e){return"string"==typeof t&&(t=parseFloat(t)),isNaN(t)?!1:t<max},presence:function(t){return""!=t},format:function(t,e){return e.test(t)}};return function(){this.doValidate=function(e,n){var r=!1,i={},a=e.fields,i={};for(var o in a){var s=a[o].validators;if(i[o]={},s)for(var u=n[o],c=0,f=s.length;f>c;c++){var l=s[c];i[o][l]=!1,t[l](u)||(r=!0,i[o][l]=!0)}}return{validateresult:i,isDirty:r}}}}(),Ajax=function(){var t=this;this.createHttpRequestObject=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxm12.XMLHTTP")}catch(t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}return null},this.request=this.createHttpRequestObject(),this.processRespone=function(e){if(4==t.request.readyState&&200==t.request.status){var n=t.request.responseText;"string"==typeof n&&(n=JSON.parse(n)),e(n)}},this.parseParmeter=function(t){var e="";for(var n in t)e+=n+"="+t[n]+"&";return e.substring(0,e.length-1)},this.post=function(e,n,r){var i=this.parseParmeter(n);this.request||(this.request=this.createHttpRequestObject()),this.request.onreadystatechange=function(e){t.processRespone(r)},this.request.open("POST",e,!0),this.request.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.request.send(i)}},BaseModel=function(t){return function(){this.datas=[],this.addRecordsIndex=[],this.setDefaultMapping=function(){var t=this.fields;for(var e in t)t[e].mapping||(t[e].mapping=e)},this.dataMapping=function(t,e){for(var n=[],r=0,i=t.length;i>r;r++){var a={},o=this.fields;for(var s in this.fields){var u=e?t[r][o[s].element]:t[r][o[s].mapping];void 0===u&&(u=this.fields[s].defaultValue||("number"==this.fields[s].type.toLowerCase(),0)),e?a[this.fields[s].mapping]=u:a[s]=u}n.push(a)}return n},this.post=function(e,n){url=this.method,t.post(url,e,function(t){n&&"function"==typeof n&&n(t)})}}}(new Ajax),BaseForm=function(t,e){var n=function(n){return new function(){this.setPostConfig=function(t,e,n){this.data=e,this.modelObject=t,this.url=n},this.validate=function(e){var n=t.doValidate(this.modelObject,this.data);return n.isDirty&&e(n.validateresult),!n.isDirty},this.postAfterValidate=function(t,e){this.validate(e)&&this.dopost(t)},this.dopost=function(t,e,n){this.post(e||this.url,this.data,t)},this.post=function(t,n,r){e.post(t,n,function(t){"string"==typeof t&&(t=JSON.parse(t)),r&&"function"==typeof r&&r(t)})}}}(Validator);return function(){this.data={},this.setName=function(){for(var t in this.fields)this.fields&&this.fields[t]&&!this.fields[t].name&&(this.fields[t].name=t)},this.collectData=function(){var t={};for(var e in this.fields){var n=document.querySelector("#"+this.fields[e].name).value||"";t[e]=n}this.data=t},this.getValidateFailMsg=function(t){var e=[];for(var n in t)for(var r in t[n])t[n][r]&&e.push(this.fields[n].validateFail[r]);return e},this.beforePost=function(){this.setName(),this.collectData(),n.setPostConfig(this,this.data,this.method)},this.post=function(t,e){this.beforePost(),n.postAfterValidate(t,e)}}}(new Validator,new Ajax);